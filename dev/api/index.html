<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · SimilaritySearch.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://sadit.github.io/SimilaritySearch.jl/api/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SimilaritySearch.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Indexes"><span>Indexes</span></a></li><li><a class="tocitem" href="#Searching"><span>Searching</span></a></li><li><a class="tocitem" href="#Computing-all-knns"><span>Computing all knns</span></a></li><li><a class="tocitem" href="#Indexing-elements"><span>Indexing elements</span></a></li><li><a class="tocitem" href="#Distance-functions"><span>Distance functions</span></a></li><li><a class="tocitem" href="#Public-API"><span>Public API</span></a></li><li><a class="tocitem" href="#Private-API"><span>Private API</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sadit/SimilaritySearch.jl/blob/master/docs/src/api.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Indexes"><a class="docs-heading-anchor" href="#Indexes">Indexes</a><a id="Indexes-1"></a><a class="docs-heading-anchor-permalink" href="#Indexes" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.ExhaustiveSearch" href="#SimilaritySearch.ExhaustiveSearch"><code>SimilaritySearch.ExhaustiveSearch</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ExhaustiveSearch(dist::SemiMetric, db::AbstractVector)</code></pre><p>Solves queries evaluating <code>dist</code> for the query and all elements in the dataset</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/seq.jl#LL7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.SearchGraph" href="#SimilaritySearch.SearchGraph"><code>SimilaritySearch.SearchGraph</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct SearchGraph &lt;: AbstractSearchContext</code></pre><p>SearchGraph index. It stores a set of points that can be compared through a distance function <code>dist</code>. The performance is determined by the search algorithm <code>search_algo</code> and the neighborhood policy. It supports callbacks to adjust parameters as insertions are made.</p><ul><li><code>hints</code>: Initial points for exploration (empty hints imply using random points)</li></ul><p>Note: Parallel insertions should be made through <code>append!</code> or <code>index!</code> function with <code>parallel_block &gt; 1</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL54-L65">source</a></section></article><h2 id="Searching"><a class="docs-heading-anchor" href="#Searching">Searching</a><a id="Searching-1"></a><a class="docs-heading-anchor-permalink" href="#Searching" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.search" href="#SimilaritySearch.search"><code>SimilaritySearch.search</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">search(seq::ExhaustiveSearch, q, res::KnnResult)</code></pre><p>Solves the query evaluating all items in the given query.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/seq.jl#LL26-L30">source</a></section><section><div><pre><code class="language-julia hljs">search(bs::BeamSearch, index::SearchGraph, q, res, hints, pools; bsize=bs.bsize, Δ=bs.Δ, maxvisits=bs.maxvisits)</code></pre><p>Tries to reach the set of nearest neighbors specified in <code>res</code> for <code>q</code>.</p><ul><li><code>bs</code>: the parameters of <code>BeamSearch</code></li><li><code>index</code>: the local search index</li><li><code>q</code>: the query</li><li><code>res</code>: The result object, it stores the results and also specifies the kind of query</li><li><code>hints</code>: Starting points for searching, randomly selected when it is an empty collection</li><li><code>pools</code>: A SearchGraphPools object with preallocated pools</li></ul><p>Optional arguments (defaults to values in <code>bs</code>)</p><ul><li><code>bsize</code>: Beam size</li><li><code>Δ</code>: exploration expansion factor</li><li><code>maxvisits</code>: Maximum number of nodes to visit (distance evaluations)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/beamsearch.jl#LL94-L110">source</a></section><section><div><pre><code class="language-julia hljs">search(index::SearchGraph, q, res; hints=index.hints, pools=getpools(index))</code></pre><p>Solves the specified query <code>res</code> for the query object <code>q</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL346-L350">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.searchbatch" href="#SimilaritySearch.searchbatch"><code>SimilaritySearch.searchbatch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">searchbatch(index, Q, k::Integer=10; parallel=false, pools=GlobalKnnResult) -&gt; indices, distances</code></pre><p>Searches a batch of queries in the given index (searches for k neighbors).</p><ul><li><code>parallel</code> specifies if the query should be solved in parallel at object level (each query is sequentially solved but many queries solved in different threads).</li><li><code>pool</code> relevant if <code>parallel=true</code>. If it is explicitly given it should be an array of <code>Threads.nthreads()</code> preallocated <code>KnnResult</code> objects used to reduce memory allocations.   In most case uses the default is enought, but different pools should be used when indexes use internal indexes to solve queries (e.g., using index&#39;s proxies or database objects defined as indexes).</li></ul><p>Note: The i-th column in indices and distances correspond to the i-th query in <code>Q</code> Note: The final indices at each column can be <code>0</code> if the search process was unable to retrieve <code>k</code> neighbors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL47-L58">source</a></section><section><div><pre><code class="language-julia hljs">searchbatch(index, Q, I::AbstractMatrix{Int32}, D::AbstractMatrix{Float32}; parallel=false, pools=getpools(index)) -&gt; indices, distances</code></pre><p>Searches a batch of queries in the given index and <code>I</code> and <code>D</code> as output (searches for <code>k=size(I, 1)</code>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL66-L71">source</a></section><section><div><pre><code class="language-julia hljs">searchbatch(index, Q, KNN::AbstractVector{KnnResult}; parallel=false, pools=getpools(index)) -&gt; indices, distances</code></pre><p>Searches a batch of queries in the given index using an array of KnnResult&#39;s; each KnnResult object can specify different <code>k</code> values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL91-L96">source</a></section></article><h2 id="Computing-all-knns"><a class="docs-heading-anchor" href="#Computing-all-knns">Computing all knns</a><a id="Computing-all-knns-1"></a><a class="docs-heading-anchor-permalink" href="#Computing-all-knns" title="Permalink"></a></h2><p>The operation of computing all knns in the index is computed as follows:</p><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.allknn" href="#SimilaritySearch.allknn"><code>SimilaritySearch.allknn</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">allknn(g::AbstractSearchContext, k::Integer; parallel=false, pools=getpools(g)) -&gt; knns, dists</code></pre><p>Computes all the k nearest neighbors (all vs all) using the index <code>g</code>. It removes self references.</p><p>Parameters:</p><ul><li><code>g</code>: the index</li><li><code>k</code>: the number of neighbors to retrieve</li><li><code>parallel</code>: If true, the construction will use all threads available threads</li><li><code>pools</code>: A pools object, dependent of <code>g</code></li></ul><p>Returns:</p><ul><li><code>knns</code> a (k, n) matrix of identifiers; the i-th column corresponds to the i-th object in the dataset.   Zeros can happen to the end of each column meaning that the retrieval was less than the desired <code>k</code></li><li><code>dists</code> a (k, n) matrix of distances; the i-th column corresponds to the i-th object in the dataset.   Zero values in <code>knns</code> should be ignored in <code>dists</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/allknn.jl#LL5-L24">source</a></section><section><div><p>allknn(g, knns, dists; parallel=false, pools=getpools(g)) -&gt; knns, dists</p><p>Computes all the k nearest neighbors (all vs all) using the index <code>g</code>. It removes self references.</p><p>Arguments:</p><ul><li><code>g</code>: the index</li><li><code>knns</code>: an uninitialized integer matrix of (k, n) size for storing the <code>k</code> nearest neighbors of the <code>n</code> elements</li><li><code>dists</code>: an uninitialized floating point matrix of (k, n) size for storing the <code>k</code> nearest distances of the <code>n</code> elements</li><li><code>parallel</code>: If true, the construction will use all threads available threads</li><li><code>pools</code>: A pools object, dependent of <code>g</code></li></ul><p>Results:</p><ul><li><code>knns</code> and <code>dists</code> are returned. Note that the index can retrieve less than <code>k</code> objects, and these are represented as zeros at the end of each column (can happen)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/allknn.jl#LL71-L87">source</a></section></article><h2 id="Indexing-elements"><a class="docs-heading-anchor" href="#Indexing-elements">Indexing elements</a><a id="Indexing-elements-1"></a><a class="docs-heading-anchor-permalink" href="#Indexing-elements" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Base.push!-Tuple{SearchGraph, Any}" href="#Base.push!-Tuple{SearchGraph, Any}"><code>Base.push!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">push!(
    index::SearchGraph,
    item;
    push_item=true,
    callbacks=SearchGraphCallbacks(),
    pools=getpools(index)
)</code></pre><p>Appends an object into the index. It accepts the same arguments that <code>push!</code> but assuming some default values.</p><p>Arguments:</p><ul><li><p><code>index</code>: The search graph index where the insertion is going to happen</p></li><li><p><code>item</code>: The object to be inserted, it should be in the same space than other objects in the index and understood by the distance metric.</p></li><li><p><code>push_item</code>: if <code>push_item=false</code> is an internal option, used by <code>append!</code> and <code>index!</code> (it avoids to insert <code>item</code> into the database since it is already inserted but not indexed)</p></li><li><p><code>callbacks</code>: The set of callbacks that are called whenever the index grows enough. Keeps hyperparameters and structure in shape.</p></li><li><p><code>pools</code>: The set of caches used for searching.</p></li><li><p>Note: <code>callbacks=nothing</code> ignores the execution of any callback</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL281-L301">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.push_item!" href="#SimilaritySearch.push_item!"><code>SimilaritySearch.push_item!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>push<em>item!(     index::SearchGraph,     item,     push</em>item,     callbacks,     pools )</p><p>Appends an object into the index</p><p>Arguments:</p><ul><li><p><code>index</code>: The search graph index where the insertion is going to happen</p></li><li><p><code>item</code>: The object to be inserted, it should be in the same space than other objects in the index and understood by the distance metric.</p></li><li><p><code>push_item</code>: if <code>false</code> is an internal option, used by <code>append!</code> and <code>index!</code> (it avoids to insert <code>item</code> into the database since it is already inserted but not indexed)</p></li><li><p><code>callbacks</code>: The set of callbacks that are called whenever the index grows enough. Keeps hyperparameters and structure in shape.</p></li><li><p><code>pools</code>: The set of caches used for searching.</p></li><li><p>Note: setting <code>callbacks</code> as <code>nothing</code> ignores the execution of any callback</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL312-L332">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.append!" href="#Base.append!"><code>Base.append!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">append!(
    index::SearchGraph,
    db;
    parallel_block=1,
    parallel_minimum_first_block=parallel_block,
    callbacks=SearchGraphCallbacks(),
    pools=getpools(index)
)</code></pre><p>Appends all items in db to the index. It can be made in parallel or sequentially.</p><p>Arguments:</p><ul><li><code>index</code>: the search graph index</li><li><code>db</code>: the collection of objects to insert, an <code>AbstractDatabase</code> is the canonical input, but supports any iterable objects</li><li><code>parallel_block</code>: The number of elements that the multithreading algorithm process at once,   it is important to be larger that the number of available threads but not so large since the quality of the search graph could degrade (a few times the number of threads is enough).   If <code>parallel_block=1</code> the algorithm becomes sequential.</li><li><code>parallel_minimum_first_block</code>: The number of sequential appends before running parallel.</li></ul><p>Note: Parallel doesn&#39;t trigger callbacks inside blocks.</p><ul><li><code>callbacks</code>: A <code>SearchGraphCallbacks</code> object to be called after some insertions   (specified by the <code>callbacks</code> object). These callbacks are used to maintain the algorithm   in good shape after many insertions (adjust hyperparameters and the structure).</li><li><code>pools</code>: The set of caches used for searching.</li></ul><p>Note 1: Callbacks are not executed inside parallel blocks Note 2: Callbacks will be ignored if <code>callbacks=nothing</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL143-L172">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.index!" href="#SimilaritySearch.index!"><code>SimilaritySearch.index!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">index!(index::SearchGraph; parallel_block=1, parallel_minimum_first_block=parallel_block, callbacks=SearchGraphCallbacks())</code></pre><p>Indexes the already initialized database (e.g., given in the constructor method). It can be made in parallel or sequentially. The arguments are the same than <code>append!</code> function but using the internal <code>index.db</code> as input.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL199-L205">source</a></section></article><h2 id="Distance-functions"><a class="docs-heading-anchor" href="#Distance-functions">Distance functions</a><a id="Distance-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Distance-functions" title="Permalink"></a></h2><p>The distance functions are defined to work under the <code>evaluate(::metric, u, v)</code> function (borrowed from <a href="https://github.com/JuliaStats/Distances.jl">Distances.jl</a> package).</p><h3 id="Cosine-and-angle-distances-for-vectors"><a class="docs-heading-anchor" href="#Cosine-and-angle-distances-for-vectors">Cosine and angle distances for vectors</a><a id="Cosine-and-angle-distances-for-vectors-1"></a><a class="docs-heading-anchor-permalink" href="#Cosine-and-angle-distances-for-vectors" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.CosineDistance" href="#SimilaritySearch.CosineDistance"><code>SimilaritySearch.CosineDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><p>CosineDistance()</p><p>The cosine is defined as:</p><p class="math-container">\[\cos(u, v) = \frac{\sum_i u_i v_i}{\sqrt{\sum_i u_i^2} \sqrt{\sum_i v_i^2}}\]</p><p>The cosine distance is defined as <span>$1 - \cos(u,v)$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL7-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.NormalizedCosineDistance" href="#SimilaritySearch.NormalizedCosineDistance"><code>SimilaritySearch.NormalizedCosineDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NormalizedCosineDistance()</code></pre><p>Similar to <a href="#SimilaritySearch.CosineDistance"><code>CosineDistance</code></a> but suppose that input vectors are already normalized, and therefore, reduced to simply one minus the dot product.</p><p class="math-container">\[1 - \sum_i {u_i v_i}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL29-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.AngleDistance" href="#SimilaritySearch.AngleDistance"><code>SimilaritySearch.AngleDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><p>AngleDistance()</p><p>The angle distance is defined as:</p><p class="math-container">\[∠(u, v)= \arccos(\cos(u, v))\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL19-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.NormalizedAngleDistance" href="#SimilaritySearch.NormalizedAngleDistance"><code>SimilaritySearch.NormalizedAngleDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NormalizedAngleDistance()</code></pre><p>Similar to <a href="#SimilaritySearch.AngleDistance"><code>AngleDistance</code></a> but suppose that input vectors are already normalized</p><p class="math-container">\[\arccos \sum_i {u_i v_i}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL41-L50">source</a></section></article><h3 id="Set-distance-functions"><a class="docs-heading-anchor" href="#Set-distance-functions">Set distance functions</a><a id="Set-distance-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Set-distance-functions" title="Permalink"></a></h3><p>Set bbject are represented as ordered arrays</p><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.JaccardDistance" href="#SimilaritySearch.JaccardDistance"><code>SimilaritySearch.JaccardDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JaccardDistance()</code></pre><p>The Jaccard distance is defined as</p><p class="math-container">\[J(u, v) = \frac{|u \cap v|}{|u \cup v|}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL7-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.DiceDistance" href="#SimilaritySearch.DiceDistance"><code>SimilaritySearch.DiceDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DiceDistance()</code></pre><p>The Dice distance is defined as</p><p class="math-container">\[D(u, v) = \frac{2 |u \cap v|}{|u| + |v|}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL18-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.IntersectionDissimilarity" href="#SimilaritySearch.IntersectionDissimilarity"><code>SimilaritySearch.IntersectionDissimilarity</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IntersectionDissimilarity()</code></pre><p>The intersection dissimilarity uses the size of the intersection as a mesuare of similarity as follows:</p><p class="math-container">\[I(u, v) = 1 - \frac{|u \cap v|}{\max \{|u|, |v|\}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL29-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.CosineDistanceSet" href="#SimilaritySearch.CosineDistanceSet"><code>SimilaritySearch.CosineDistanceSet</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CosineDistanceSet()</code></pre><p>The cosine distance for very sparse binary vectors represented as sorted lists of positive integers where ones occur.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL40-L45">source</a></section></article><h3 id="String-alignment-distances"><a class="docs-heading-anchor" href="#String-alignment-distances">String alignment distances</a><a id="String-alignment-distances-1"></a><a class="docs-heading-anchor-permalink" href="#String-alignment-distances" title="Permalink"></a></h3><p>The following uses strings/arrays as input, i.e., objects follow the array interface. A broader set of distances for strings can be found in the <a href="https://github.com/matthieugomez/StringDistances.jl">StringDistances.jl</a> package.</p><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.CommonPrefixDissimilarity" href="#SimilaritySearch.CommonPrefixDissimilarity"><code>SimilaritySearch.CommonPrefixDissimilarity</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CommonPrefixDissimilarity()</code></pre><p>Uses the common prefix as a measure of dissimilarity between two strings</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.GenericLevenshteinDistance" href="#SimilaritySearch.GenericLevenshteinDistance"><code>SimilaritySearch.GenericLevenshteinDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">GenericLevenshteinDistance(;icost, dcost, rcost)</code></pre><p>The levenshtein distance measures the minimum number of edit operations to convert one string into another. The costs insertion <code>icost</code>, deletion cost <code>dcost</code>, and replace cost <code>rcost</code>. Not thread safe, use a copy of for each thread.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL21-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.StringHammingDistance" href="#SimilaritySearch.StringHammingDistance"><code>SimilaritySearch.StringHammingDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">StringHammingDistance()</code></pre><p>The hamming distance counts the differences between two equally sized strings</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.LevenshteinDistance" href="#SimilaritySearch.LevenshteinDistance"><code>SimilaritySearch.LevenshteinDistance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">LevenshteinDistance()</code></pre><p>Instantiates a GenericLevenshteinDistance object to perform traditional levenshtein distance</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL34-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.LcsDistance" href="#SimilaritySearch.LcsDistance"><code>SimilaritySearch.LcsDistance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">LcsDistance()</code></pre><p>Instantiates a GenericLevenshteinDistance object to perform LCS distance</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL41-L45">source</a></section></article><h3 id="Distances-for-Cloud-of-points"><a class="docs-heading-anchor" href="#Distances-for-Cloud-of-points">Distances for Cloud of points</a><a id="Distances-for-Cloud-of-points-1"></a><a class="docs-heading-anchor-permalink" href="#Distances-for-Cloud-of-points" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.HausdorffDistance" href="#SimilaritySearch.HausdorffDistance"><code>SimilaritySearch.HausdorffDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">HausdorffDistance(dist::SemiMetric)</code></pre><p>Hausdorff distance is defined as the maximum of the minimum between two clouds of points.</p><p class="math-container">\[Hausdorff(U, V) = \max{\max_{u \in U} nndist(u, V), \max{v \in V} nndist(v, U) }\]</p><p>where <span>$nndist(u, V)$</span> computes the distance of <span>$u$</span> to its nearest neighbor in <span>$V$</span> using the <code>dist</code> metric.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cloud.jl#LL4-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.MinHausdorffDistance" href="#SimilaritySearch.MinHausdorffDistance"><code>SimilaritySearch.MinHausdorffDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MinHausdorffDistance(dist::SemiMetric)</code></pre><p>Similar to <a href="@ref">HausdorffDistance</a> but using minimum instead of maximum.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cloud.jl#LL53-L57">source</a></section></article><h2 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{AngleDistance, Any, Any}" href="#Distances.evaluate-Tuple{AngleDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::AngleDistance, a, b)</code></pre><p>Computes the angle  between twovectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL93-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{BinaryHammingDistance, Any, Any}" href="#Distances.evaluate-Tuple{BinaryHammingDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::BinaryHammingDistance, a, b)
evaluate(::BinaryHammingDistance, a::AbstractVector, b::AbstractVector) where {T&lt;:Unsigned}</code></pre><p>Computes the binary hamming distance for bit types and arrays of bit types</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/bits.jl#LL12-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{CommonPrefixDissimilarity, Any, Any}" href="#Distances.evaluate-Tuple{CommonPrefixDissimilarity, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::CommonPrefixDissimilarity, a, b)</code></pre><p>Computes a dissimilarity based on the common prefix between two strings</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL66-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{CosineDistance, Any, Any}" href="#Distances.evaluate-Tuple{CosineDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::CosineDistance, a, b)</code></pre><p>Computes the cosine distance between two vectors. Please use AngleDistance if you are expecting a metric function (cosine_distance is a faster alternative whenever the triangle inequality is not needed)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL84-L90">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{CosineDistanceSet, Any, Any}" href="#Distances.evaluate-Tuple{CosineDistanceSet, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::CosineDistanceSet, a, b)</code></pre><p>Computes the cosine distance where <code>a</code> and <code>b</code> are sorted lists of integers (emulating binary sparse vectores)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{DiceDistance, Any, Any}" href="#Distances.evaluate-Tuple{DiceDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::DiceDistance, a, b)</code></pre><p>Computes the Dice&#39;s distance of <code>a</code> and <code>b</code> both sets specified as sorted vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL93-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{GenericLevenshteinDistance, Any, Any}" href="#Distances.evaluate-Tuple{GenericLevenshteinDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::GenericLevenshteinDistance, a, b)</code></pre><p>Computes the edit distance between two strings, this is a low level function</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL74-L78">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{HausdorffDistance, Any, Any}" href="#Distances.evaluate-Tuple{HausdorffDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(m::HausdorffDistance, u, v)</code></pre><p>Computes the Hausdorff distance between two cloud of points.</p><p><code>u</code> and <code>v</code> are iterables where each object can be measured with the internal distance <code>dist</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cloud.jl#LL38-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{IntersectionDissimilarity, Any, Any}" href="#Distances.evaluate-Tuple{IntersectionDissimilarity, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::IntersectionDissimilarity, a, b)</code></pre><p>Uses the intersection as a distance function (non-metric)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{JaccardDistance, Any, Any}" href="#Distances.evaluate-Tuple{JaccardDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::JaccardDistance, a, b)</code></pre><p>Computes the Jaccard&#39;s distance of <code>a</code> and <code>b</code> both sets specified as sorted vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL82-L87">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{L1Distance, Any, Any}" href="#Distances.evaluate-Tuple{L1Distance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::L1Distance, a, b)</code></pre><p>Computes the Manhattan&#39;s distance between <code>a</code> and <code>b</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL74-L78">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{L2Distance, Any, Any}" href="#Distances.evaluate-Tuple{L2Distance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::L2Distance, a, b)</code></pre><p>Computes the Euclidean&#39;s distance betweem <code>a</code> and <code>b</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL90-L94">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{LInftyDistance, Any, Any}" href="#Distances.evaluate-Tuple{LInftyDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::LInftyDistance, a, b)</code></pre><p>Computes the maximum distance or Chebyshev&#39;s distance</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL121-L125">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{LpDistance, Any, Any}" href="#Distances.evaluate-Tuple{LpDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(lp::LpDistance, a, b)</code></pre><p>Computes generic Minkowski&#39;s distance</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL137-L141">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{MinHausdorffDistance, Any, Any}" href="#Distances.evaluate-Tuple{MinHausdorffDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(m::MinHausdorffDistance, u, v)</code></pre><p>Computes a variant of the Hausdorff distance that uses the minimum instead of the maximum. <code>u</code> and <code>v</code> are iterables where each object can be measured with the internal distance <code>dist</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cloud.jl#LL71-L75">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{NormalizedAngleDistance, Any, Any}" href="#Distances.evaluate-Tuple{NormalizedAngleDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::AngleDistance, a, b)</code></pre><p>Computes the angle  between twovectors. It supposes that all vectors are normalized</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL76-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{NormalizedCosineDistance, Any, Any}" href="#Distances.evaluate-Tuple{NormalizedCosineDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::NormalizedCosineDistance, a, b)</code></pre><p>Computes the cosine distance between two vectors, it expects normalized vectors. Please use NormalizedAngleDistance if you are expecting a metric function (cosine_distance is a faster alternative whenever the triangle inequality is not needed)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/cos.jl#LL67-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{SqL2Distance, Any, Any}" href="#Distances.evaluate-Tuple{SqL2Distance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evaluate(::SqL2Distance, a, b)</code></pre><p>Computes the squared Euclidean&#39;s distance between <code>a</code> and <code>b</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Distances.evaluate-Tuple{StringHammingDistance, Any, Any}" href="#Distances.evaluate-Tuple{StringHammingDistance, Any, Any}"><code>Distances.evaluate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs"> evaluate(::StringHammingDistance, a, b)</code></pre><p>Computes the hamming distance between two sequences of the same length</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL117-L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.LcsDistance-Tuple{}" href="#SimilaritySearch.LcsDistance-Tuple{}"><code>SimilaritySearch.LcsDistance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">LcsDistance()</code></pre><p>Instantiates a GenericLevenshteinDistance object to perform LCS distance</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL41-L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.LevenshteinDistance-Tuple{}" href="#SimilaritySearch.LevenshteinDistance-Tuple{}"><code>SimilaritySearch.LevenshteinDistance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">LevenshteinDistance()</code></pre><p>Instantiates a GenericLevenshteinDistance object to perform traditional levenshtein distance</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL34-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.allknn-Tuple{AbstractSearchContext, AbstractMatrix{Int32}, AbstractMatrix{Float32}}" href="#SimilaritySearch.allknn-Tuple{AbstractSearchContext, AbstractMatrix{Int32}, AbstractMatrix{Float32}}"><code>SimilaritySearch.allknn</code></a> — <span class="docstring-category">Method</span></header><section><div><p>allknn(g, knns, dists; parallel=false, pools=getpools(g)) -&gt; knns, dists</p><p>Computes all the k nearest neighbors (all vs all) using the index <code>g</code>. It removes self references.</p><p>Arguments:</p><ul><li><code>g</code>: the index</li><li><code>knns</code>: an uninitialized integer matrix of (k, n) size for storing the <code>k</code> nearest neighbors of the <code>n</code> elements</li><li><code>dists</code>: an uninitialized floating point matrix of (k, n) size for storing the <code>k</code> nearest distances of the <code>n</code> elements</li><li><code>parallel</code>: If true, the construction will use all threads available threads</li><li><code>pools</code>: A pools object, dependent of <code>g</code></li></ul><p>Results:</p><ul><li><code>knns</code> and <code>dists</code> are returned. Note that the index can retrieve less than <code>k</code> objects, and these are represented as zeros at the end of each column (can happen)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/allknn.jl#LL71-L87">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.allknn-Tuple{AbstractSearchContext, Integer}" href="#SimilaritySearch.allknn-Tuple{AbstractSearchContext, Integer}"><code>SimilaritySearch.allknn</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">allknn(g::AbstractSearchContext, k::Integer; parallel=false, pools=getpools(g)) -&gt; knns, dists</code></pre><p>Computes all the k nearest neighbors (all vs all) using the index <code>g</code>. It removes self references.</p><p>Parameters:</p><ul><li><code>g</code>: the index</li><li><code>k</code>: the number of neighbors to retrieve</li><li><code>parallel</code>: If true, the construction will use all threads available threads</li><li><code>pools</code>: A pools object, dependent of <code>g</code></li></ul><p>Returns:</p><ul><li><code>knns</code> a (k, n) matrix of identifiers; the i-th column corresponds to the i-th object in the dataset.   Zeros can happen to the end of each column meaning that the retrieval was less than the desired <code>k</code></li><li><code>dists</code> a (k, n) matrix of distances; the i-th column corresponds to the i-th object in the dataset.   Zero values in <code>knns</code> should be ignored in <code>dists</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/allknn.jl#LL5-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.find_neighborhood-Tuple{SearchGraph, Any, SearchGraphPools}" href="#SimilaritySearch.find_neighborhood-Tuple{SearchGraph, Any, SearchGraphPools}"><code>SimilaritySearch.find_neighborhood</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">find_neighborhood(index::SearchGraph{T}, item, pools; hints=index.hints)</code></pre><p>Searches for <code>item</code> neighborhood in the index, i.e., if <code>item</code> were in the index whose items should be its neighbors (intenal function). <code>res</code> is always reused since <code>reduce</code> creates a new KnnResult from it (a copy if <code>reduce</code> in its simpler terms)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL14-L19">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.getpair-Tuple{KnnResult, Any}" href="#SimilaritySearch.getpair-Tuple{KnnResult, Any}"><code>SimilaritySearch.getpair</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getindex(res::KnnResult, i)</code></pre><p>Access the i-th item in <code>res</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL138-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.getpair-Tuple{KnnResultShift, SimilaritySearch.KnnResultState, Any}" href="#SimilaritySearch.getpair-Tuple{KnnResultShift, SimilaritySearch.KnnResultState, Any}"><code>SimilaritySearch.getpair</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getindex(res::KnnResultShift, st::KnnResultState, i)</code></pre><p>Access the i-th item in <code>res</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.index!-Tuple{SearchGraph}" href="#SimilaritySearch.index!-Tuple{SearchGraph}"><code>SimilaritySearch.index!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">index!(index::SearchGraph; parallel_block=1, parallel_minimum_first_block=parallel_block, callbacks=SearchGraphCallbacks())</code></pre><p>Indexes the already initialized database (e.g., given in the constructor method). It can be made in parallel or sequentially. The arguments are the same than <code>append!</code> function but using the internal <code>index.db</code> as input.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL199-L205">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.macrorecall" href="#SimilaritySearch.macrorecall"><code>SimilaritySearch.macrorecall</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">macrorecall(goldI::AbstractMatrix, resI::AbstractMatrix, k=size(goldI, 1))::Float64</code></pre><p>Computes the macro recall score using goldI as gold standard and resI as predictions; it expects that matrices of integers (identifiers). If <code>k</code> is given, then the results are cut to first <code>k</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/perf.jl#LL18-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.macrorecall-Tuple{AbstractVector{T} where T, AbstractVector{T} where T}" href="#SimilaritySearch.macrorecall-Tuple{AbstractVector{T} where T, AbstractVector{T} where T}"><code>SimilaritySearch.macrorecall</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">macrorecall(goldlist::AbstractVector, reslist::AbstractVector)::Float64</code></pre><p>Computes the macro recall score using sets of results (KnnResult objects or vectors of itegers).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/perf.jl#LL37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.maxlength-Tuple{KnnResultShift}" href="#SimilaritySearch.maxlength-Tuple{KnnResultShift}"><code>SimilaritySearch.maxlength</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">maxlength(res::KnnResultShift)</code></pre><p>The maximum allowed cardinality (the k of knn)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.maxlength-Tuple{KnnResult}" href="#SimilaritySearch.maxlength-Tuple{KnnResult}"><code>SimilaritySearch.maxlength</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">maxlength(res::KnnResult)</code></pre><p>The maximum allowed cardinality (the k of knn)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL113-L117">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.optimize!-Tuple{SearchGraph, OptimizeParameters}" href="#SimilaritySearch.optimize!-Tuple{SearchGraph, OptimizeParameters}"><code>SimilaritySearch.optimize!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">optimize!(
    index::SearchGraph,
    opt::OptimizeParameters;
    queries=nothing,
    scalemaxvisits=1.0,
    maxvisits=2 * index.search_algo.maxvisits,
    verbose=index.verbose
)</code></pre><p>Optimizes the index using the <code>opt</code> parameters. If <code>queries=nothing</code> then it selects a small sample randomply from  the already indexed objects; this sample size and the number of neighbors are also parameters in <code>opt</code>.</p><p>Note: The <code>visits</code> parameters is a factor allowing early stopping based on the number of distance evaluations seen in the optimization procedure; please note that in some cases this will reduce the quality to limit the search times. Please also take into account that inserting items after limiting visits may also cause severe quality degradation when maxvisits is not also updated as required. You can always adjust maxvisits modifying <code>index.search_algo.maxvisits</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/opt.jl#LL107-L123">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.push_item!-Tuple{SearchGraph, Any, Any, Any, Any}" href="#SimilaritySearch.push_item!-Tuple{SearchGraph, Any, Any, Any, Any}"><code>SimilaritySearch.push_item!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>push<em>item!(     index::SearchGraph,     item,     push</em>item,     callbacks,     pools )</p><p>Appends an object into the index</p><p>Arguments:</p><ul><li><p><code>index</code>: The search graph index where the insertion is going to happen</p></li><li><p><code>item</code>: The object to be inserted, it should be in the same space than other objects in the index and understood by the distance metric.</p></li><li><p><code>push_item</code>: if <code>false</code> is an internal option, used by <code>append!</code> and <code>index!</code> (it avoids to insert <code>item</code> into the database since it is already inserted but not indexed)</p></li><li><p><code>callbacks</code>: The set of callbacks that are called whenever the index grows enough. Keeps hyperparameters and structure in shape.</p></li><li><p><code>pools</code>: The set of caches used for searching.</p></li><li><p>Note: setting <code>callbacks</code> as <code>nothing</code> ignores the execution of any callback</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL312-L332">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.push_neighborhood!-Tuple{SearchGraph, Any, Any, Any}" href="#SimilaritySearch.push_neighborhood!-Tuple{SearchGraph, Any, Any, Any}"><code>SimilaritySearch.push_neighborhood!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">push_neighborhood!(index::SearchGraph, item, neighbors, callbacks; push_item=true)</code></pre><p>Inserts the object <code>item</code> into the index, i.e., creates an edge from items listed in L and the vertex created for ìtem` (internal function)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL31-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.recallscore-Tuple{Any, Any}" href="#SimilaritySearch.recallscore-Tuple{Any, Any}"><code>SimilaritySearch.recallscore</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">recallscore(gold::Set, res)</code></pre><p>Compute recall and precision scores from the result sets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/perf.jl#LL5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.reuse!" href="#SimilaritySearch.reuse!"><code>SimilaritySearch.reuse!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">reuse!(res::KnnResultShift)
reuse!(res::KnnResultShift, k::Integer)</code></pre><p>Returns a result set and a new initial state; reuse the memory buffers</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL123-L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.reuse!" href="#SimilaritySearch.reuse!"><code>SimilaritySearch.reuse!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">reuse!(res::KnnResult)
reuse!(res::KnnResult, k::Integer)</code></pre><p>Returns a result set and a new initial state; reuse the memory buffers</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL121-L126">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.search-Tuple{BeamSearch, SearchGraph, Any, Any, Any, SearchGraphPools}" href="#SimilaritySearch.search-Tuple{BeamSearch, SearchGraph, Any, Any, Any, SearchGraphPools}"><code>SimilaritySearch.search</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">search(bs::BeamSearch, index::SearchGraph, q, res, hints, pools; bsize=bs.bsize, Δ=bs.Δ, maxvisits=bs.maxvisits)</code></pre><p>Tries to reach the set of nearest neighbors specified in <code>res</code> for <code>q</code>.</p><ul><li><code>bs</code>: the parameters of <code>BeamSearch</code></li><li><code>index</code>: the local search index</li><li><code>q</code>: the query</li><li><code>res</code>: The result object, it stores the results and also specifies the kind of query</li><li><code>hints</code>: Starting points for searching, randomly selected when it is an empty collection</li><li><code>pools</code>: A SearchGraphPools object with preallocated pools</li></ul><p>Optional arguments (defaults to values in <code>bs</code>)</p><ul><li><code>bsize</code>: Beam size</li><li><code>Δ</code>: exploration expansion factor</li><li><code>maxvisits</code>: Maximum number of nodes to visit (distance evaluations)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/beamsearch.jl#LL94-L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.search-Tuple{ExhaustiveSearch, Any, KnnResult}" href="#SimilaritySearch.search-Tuple{ExhaustiveSearch, Any, KnnResult}"><code>SimilaritySearch.search</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">search(seq::ExhaustiveSearch, q, res::KnnResult)</code></pre><p>Solves the query evaluating all items in the given query.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/seq.jl#LL26-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.search-Tuple{SearchGraph, Any, KnnResult}" href="#SimilaritySearch.search-Tuple{SearchGraph, Any, KnnResult}"><code>SimilaritySearch.search</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">search(index::SearchGraph, q, res; hints=index.hints, pools=getpools(index))</code></pre><p>Solves the specified query <code>res</code> for the query object <code>q</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL346-L350">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.searchbatch" href="#SimilaritySearch.searchbatch"><code>SimilaritySearch.searchbatch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">searchbatch(index, Q, k::Integer=10; parallel=false, pools=GlobalKnnResult) -&gt; indices, distances</code></pre><p>Searches a batch of queries in the given index (searches for k neighbors).</p><ul><li><code>parallel</code> specifies if the query should be solved in parallel at object level (each query is sequentially solved but many queries solved in different threads).</li><li><code>pool</code> relevant if <code>parallel=true</code>. If it is explicitly given it should be an array of <code>Threads.nthreads()</code> preallocated <code>KnnResult</code> objects used to reduce memory allocations.   In most case uses the default is enought, but different pools should be used when indexes use internal indexes to solve queries (e.g., using index&#39;s proxies or database objects defined as indexes).</li></ul><p>Note: The i-th column in indices and distances correspond to the i-th query in <code>Q</code> Note: The final indices at each column can be <code>0</code> if the search process was unable to retrieve <code>k</code> neighbors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL47-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.searchbatch-Tuple{Any, Any, AbstractMatrix{Int32}, AbstractMatrix{Float32}}" href="#SimilaritySearch.searchbatch-Tuple{Any, Any, AbstractMatrix{Int32}, AbstractMatrix{Float32}}"><code>SimilaritySearch.searchbatch</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">searchbatch(index, Q, I::AbstractMatrix{Int32}, D::AbstractMatrix{Float32}; parallel=false, pools=getpools(index)) -&gt; indices, distances</code></pre><p>Searches a batch of queries in the given index and <code>I</code> and <code>D</code> as output (searches for <code>k=size(I, 1)</code>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL66-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.searchbatch-Tuple{Any, Any, AbstractVector{KnnResult}}" href="#SimilaritySearch.searchbatch-Tuple{Any, Any, AbstractVector{KnnResult}}"><code>SimilaritySearch.searchbatch</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">searchbatch(index, Q, KNN::AbstractVector{KnnResult}; parallel=false, pools=getpools(index)) -&gt; indices, distances</code></pre><p>Searches a batch of queries in the given index using an array of KnnResult&#39;s; each KnnResult object can specify different <code>k</code> values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL91-L96">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.timedsearchbatch-Tuple{Any, Any, Integer}" href="#SimilaritySearch.timedsearchbatch-Tuple{Any, Any, Integer}"><code>SimilaritySearch.timedsearchbatch</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">timedsearchbatch(index, Q, ksearch::Integer; parallel=false)</code></pre><p>Computes the K nearest neigbors of each object in <code>Q</code> and returns two matrices, and the average search time in seconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/perf.jl#LL55-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.BeamSearch" href="#SimilaritySearch.BeamSearch"><code>SimilaritySearch.BeamSearch</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BeamSearch(bsize::Integer=16, Δ::Float32)</code></pre><p>BeamSearch is an iteratively improving local search algorithm that explores the graph using blocks of <code>bsize</code> elements and neighborhoods at the time.</p><ul><li><code>bsize</code>: The size of the beam.</li><li><code>Δ</code>: Soft margin for accepting elements into the beam</li><li><code>maxvisits</code>: MAximum visits while searching, useful for early stopping without convergence</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/beamsearch.jl#LL6-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.BinaryHammingDistance" href="#SimilaritySearch.BinaryHammingDistance"><code>SimilaritySearch.BinaryHammingDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><p>BinaryHammingDistance()</p><p>Binary hamming uses bit wise operations to count the differences between bit strings</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/bits.jl#LL5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.Callback" href="#SimilaritySearch.Callback"><code>SimilaritySearch.Callback</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type Callback end</code></pre><p>Abstract type to trigger callbacks after some number of insertions. SearchGraph stores the callbacks in <code>callbacks</code> (a dictionary that associates symbols and callback objects); A SearchGraph object controls when callbacks are fired using <code>callback_logbase</code> and <code>callback_starting</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL17-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.DisjointHints" href="#SimilaritySearch.DisjointHints"><code>SimilaritySearch.DisjointHints</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct DisjointHints</code></pre><p>Indicates that hints are a small disjoint (untouched neighbors) subsample </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/hints.jl#LL38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.DistalSatNeighborhood" href="#SimilaritySearch.DistalSatNeighborhood"><code>SimilaritySearch.DistalSatNeighborhood</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DistalSatNeighborhood()</code></pre><p>New items are connected with a small set of items computed with a Distal SAT like scheme (<strong>cite</strong>). It starts with <code>k</code> near items that are reduced to a small neighborhood due to the SAT partitioning stage but in reverse order of distance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL71-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.IdentityNeighborhood" href="#SimilaritySearch.IdentityNeighborhood"><code>SimilaritySearch.IdentityNeighborhood</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct IdentityNeighborhood</code></pre><p>It does not modifies the given neighborhood</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL80-L84">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.KDisjointHints" href="#SimilaritySearch.KDisjointHints"><code>SimilaritySearch.KDisjointHints</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct KDisjointHints</code></pre><p>Indicates that hints are selected to have a disjoint neighborhood</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/hints.jl#LL65-L69">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.KnnResult" href="#SimilaritySearch.KnnResult"><code>SimilaritySearch.KnnResult</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">KnnResult(ksearch::Integer)</code></pre><p>Creates a priority queue with fixed capacity (<code>ksearch</code>) representing a knn result set. It starts with zero items and grows with <a href="#Base.push!-Tuple{SearchGraph, Any}"><code>push!(res, id, dist)</code></a> calls until <code>ksearch</code> size is reached. After this only the smallest items based on distance are preserved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.KnnResultShift" href="#SimilaritySearch.KnnResultShift"><code>SimilaritySearch.KnnResultShift</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">KnnResultShift(ksearch::Integer)</code></pre><p>Creates a priority queue with fixed capacity (<code>ksearch</code>) representing a knn result set. It starts with zero items and grows with <a href="#Base.push!-Tuple{SearchGraph, Any}"><code>push!(res, id, dist)</code></a> calls until <code>ksearch</code> size is reached. After this only the smallest items based on distance are preserved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.L1Distance" href="#SimilaritySearch.L1Distance"><code>SimilaritySearch.L1Distance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">L1Distance()</code></pre><p>The manhattan distance or <span>$L_1$</span> is defined as</p><p class="math-container">\[L_1(u, v) = \sum_i{|u_i - v_i|}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL6-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.L2Distance" href="#SimilaritySearch.L2Distance"><code>SimilaritySearch.L2Distance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">L2Distance()</code></pre><p>The euclidean distance or <span>$L_2$</span> is defined as</p><p class="math-container">\[L_2(u, v) = \sqrt{\sum_i{(u_i - v_i)^2}}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL17-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.LInftyDistance" href="#SimilaritySearch.LInftyDistance"><code>SimilaritySearch.LInftyDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LInftyDistance()</code></pre><p>The Chebyshev or <span>$L_{\infty}$</span> distance is defined as</p><p class="math-container">\[L_{\infty}(u, v) = \max_i{\left| u_i - v_i \right|}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL42-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.LpDistance" href="#SimilaritySearch.LpDistance"><code>SimilaritySearch.LpDistance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LpDistance(p)
LpDistance(p, pinv)</code></pre><p>The general Minkowski distance <span>$L_p$</span> distance is defined as</p><p class="math-container">\[L_p(u, v) = \left|\sum_i{(u_i - v_i)^p}\right|^{1/p}\]</p><p>Where <span>$p_{inv} = 1/p$</span>. Note that you can specify unrelated <code>p</code> and <code>pinv</code> if you need an specific behaviour.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL54-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.NeighborhoodReduction" href="#SimilaritySearch.NeighborhoodReduction"><code>SimilaritySearch.NeighborhoodReduction</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type NeighborhoodReduction end</code></pre><p>Overrides <code>Base.reduce(::NeighborhoodReduction, res::KnnResult, index::SearchGraph)</code> to postprocess <code>res</code> using some criteria. Called from <code>find_neighborhood</code>, and returns a new KnnResult struct (perhaps a copy of res) since <code>push_neighborhood</code> captures the reference of its output.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL7-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.RandomHints" href="#SimilaritySearch.RandomHints"><code>SimilaritySearch.RandomHints</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct RandomHints</code></pre><p>Indicates that hints are a random sample of the dataset</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/hints.jl#LL4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.SatNeighborhood" href="#SimilaritySearch.SatNeighborhood"><code>SimilaritySearch.SatNeighborhood</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SatNeighborhood()</code></pre><p>New items are connected with a small set of items computed with a SAT like scheme (<strong>cite</strong>). It starts with <code>k</code> near items that are reduced to a small neighborhood due to the SAT partitioning stage.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL62-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.SearchGraphPools" href="#SimilaritySearch.SearchGraphPools"><code>SimilaritySearch.SearchGraphPools</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SearchGraphPools(results=GlobalKnnResult, vstates=GlobalVisitedVertices, beams=GlobalBeamKnnResult)</code></pre><p>A set of pools to alleviate memory allocations in <code>SearchGraph</code> construction and searching. Relevant on multithreading scenarious where distance functions, <code>evaluate</code> can call other metric indexes that can use these shared resources (globally defined).</p><p>Each pool is a vector of <code>Threads.nthreads()</code> preallocated objects of the required type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL102-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.SqL2Distance" href="#SimilaritySearch.SqL2Distance"><code>SimilaritySearch.SqL2Distance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SqL2Distance()</code></pre><p>The squared euclidean distance is defined as</p><p class="math-container">\[L_2(u, v) = \sum_i{(u_i - v_i)^2}\]</p><p>It avoids the computation of the square root and should be used whenever you are able do it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/vectors.jl#LL28-L39">source</a></section></article><h2 id="Private-API"><a class="docs-heading-anchor" href="#Private-API">Private API</a><a id="Private-API-1"></a><a class="docs-heading-anchor-permalink" href="#Private-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Base.append!-Tuple{SearchGraph, Any}" href="#Base.append!-Tuple{SearchGraph, Any}"><code>Base.append!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">append!(
    index::SearchGraph,
    db;
    parallel_block=1,
    parallel_minimum_first_block=parallel_block,
    callbacks=SearchGraphCallbacks(),
    pools=getpools(index)
)</code></pre><p>Appends all items in db to the index. It can be made in parallel or sequentially.</p><p>Arguments:</p><ul><li><code>index</code>: the search graph index</li><li><code>db</code>: the collection of objects to insert, an <code>AbstractDatabase</code> is the canonical input, but supports any iterable objects</li><li><code>parallel_block</code>: The number of elements that the multithreading algorithm process at once,   it is important to be larger that the number of available threads but not so large since the quality of the search graph could degrade (a few times the number of threads is enough).   If <code>parallel_block=1</code> the algorithm becomes sequential.</li><li><code>parallel_minimum_first_block</code>: The number of sequential appends before running parallel.</li></ul><p>Note: Parallel doesn&#39;t trigger callbacks inside blocks.</p><ul><li><code>callbacks</code>: A <code>SearchGraphCallbacks</code> object to be called after some insertions   (specified by the <code>callbacks</code> object). These callbacks are used to maintain the algorithm   in good shape after many insertions (adjust hyperparameters and the structure).</li><li><code>pools</code>: The set of caches used for searching.</li></ul><p>Note 1: Callbacks are not executed inside parallel blocks Note 2: Callbacks will be ignored if <code>callbacks=nothing</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL143-L172">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.iterate" href="#Base.iterate"><code>Base.iterate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Base.iterate(res::KnnResult, state::Int=1)</code></pre><p>Support for iteration</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL165-L169">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.pop!-Tuple{KnnResultShift, SimilaritySearch.KnnResultState}" href="#Base.pop!-Tuple{KnnResultShift, SimilaritySearch.KnnResultState}"><code>Base.pop!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">pop!(res::KnnResultShift, st::KnnResultState)</code></pre><p>Removes and returns the last item in the pool, it is an O(1) operation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL96-L100">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.pop!-Tuple{KnnResult}" href="#Base.pop!-Tuple{KnnResult}"><code>Base.pop!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">pop!(res::KnnResult)</code></pre><p>Removes and returns the last item in the pool, it is an O(1) operation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL104-L108">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.popfirst!-Tuple{KnnResultShift, SimilaritySearch.KnnResultState}" href="#Base.popfirst!-Tuple{KnnResultShift, SimilaritySearch.KnnResultState}"><code>Base.popfirst!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">popfirst!(p::KnnResultShift, st::KnnResultState)</code></pre><p>Removes and returns the nearest neeighboor pair from the pool, an O(length(p.pool)) operation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL85-L89">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.popfirst!-Tuple{KnnResult}" href="#Base.popfirst!-Tuple{KnnResult}"><code>Base.popfirst!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">popfirst!(p::KnnResult)</code></pre><p>Removes and returns the nearest neeighboor pair from the pool, an O(length(p.pool)) operation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL95-L99">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.push!-Tuple{KnnResult, Integer, Real}" href="#Base.push!-Tuple{KnnResult, Integer, Real}"><code>Base.push!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">push!(res::KnnResult, item::Pair)
push!(res::KnnResult, id::Integer, dist::Real)</code></pre><p>Appends an item into the result set</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL68-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.push!-Tuple{KnnResultShift, SimilaritySearch.KnnResultState, Integer, Real}" href="#Base.push!-Tuple{KnnResultShift, SimilaritySearch.KnnResultState, Integer, Real}"><code>Base.push!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">push!(res::KnnResultShift, item::Pair)
push!(res::KnnResultShift, id::Integer, dist::Real)</code></pre><p>Appends an item into the result set</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL33-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch._find_start_position-Tuple{KnnResultShift}" href="#SimilaritySearch._find_start_position-Tuple{KnnResultShift}"><code>SimilaritySearch._find_start_position</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Base.iterate(res::KnnResultShift, state::Int=1)</code></pre><p>Support for iteration</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresultshift.jl#LL173-L177">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch._shifted_fixorder!" href="#SimilaritySearch._shifted_fixorder!"><code>SimilaritySearch._shifted_fixorder!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">_shifted_fixorder!(res, shift=0)</code></pre><p>Sorts the result in place; the possible element out of order is on the last entry always. It implements a kind of insertion sort that it is efficient due to the expected distribution of the items being inserted (it is expected just a few elements smaller than the current ones)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/knnresult.jl#LL29-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.common_prefix-Tuple{Any, Any}" href="#SimilaritySearch.common_prefix-Tuple{Any, Any}"><code>SimilaritySearch.common_prefix</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">common_prefix(a, b)</code></pre><p>Computes the length of the common prefix among two strings represented as arrays</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/strings.jl#LL48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.execute_callback-Tuple{KDisjointHints, Any}" href="#SimilaritySearch.execute_callback-Tuple{KDisjointHints, Any}"><code>SimilaritySearch.execute_callback</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">execute_callback(opt::KDisjointHints, index)</code></pre><p>SearchGraph&#39;s callback for selecting hints at random</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/hints.jl#LL76-L80">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.execute_callback-Tuple{NeighborhoodSize, Any}" href="#SimilaritySearch.execute_callback-Tuple{NeighborhoodSize, Any}"><code>SimilaritySearch.execute_callback</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">execute_callback(opt::NeighborhoodSize, index)</code></pre><p>SearchGraph&#39;s callback for adjusting neighborhood strategy</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL4-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.execute_callback-Tuple{OptimizeParameters, SearchGraph}" href="#SimilaritySearch.execute_callback-Tuple{OptimizeParameters, SearchGraph}"><code>SimilaritySearch.execute_callback</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">execute_callback(opt::OptimizeParameters, index::SearchGraph)</code></pre><p>SearchGraph&#39;s callback for adjunting search parameters</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/opt.jl#LL98-L102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.execute_callback-Tuple{RandomHints, Any}" href="#SimilaritySearch.execute_callback-Tuple{RandomHints, Any}"><code>SimilaritySearch.execute_callback</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">executed_callback(opt::RandomHints, index)</code></pre><p>SearchGraph&#39;s callback for selecting hints at random</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/hints.jl#LL13-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.execute_callbacks" href="#SimilaritySearch.execute_callbacks"><code>SimilaritySearch.execute_callbacks</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">execute_callbacks(index::SearchGraph, n=length(index), m=n+1)</code></pre><p>Process all registered callbacks</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL359-L363">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.getknnresult-Tuple{Integer, AbstractVector{T} where T}" href="#SimilaritySearch.getknnresult-Tuple{Integer, AbstractVector{T} where T}"><code>SimilaritySearch.getknnresult</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">getknnresult(k::Integer, pools) -&gt; KnnResult</code></pre><p>Internal function to share result sets for the same thread and avoid memory allocations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/SimilaritySearch.jl#LL35-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.intersectionsize" href="#SimilaritySearch.intersectionsize"><code>SimilaritySearch.intersectionsize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">intersectionsize(a, b, o=Forward)</code></pre><p>Computes the size the intersections of <code>a</code> and <code>b</code>, specified as ordered sequences.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL48-L52">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.reduce_neighborhood-Tuple{DistalSatNeighborhood, SearchGraph, Any, Any, SearchGraphPools}" href="#SimilaritySearch.reduce_neighborhood-Tuple{DistalSatNeighborhood, SearchGraph, Any, Any, SearchGraphPools}"><code>SimilaritySearch.reduce_neighborhood</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reduce(sat::DistalSatNeighborhood, index::SearchGraph, item, res, pools)</code></pre><p>Reduces <code>res</code> using the DistSAT strategy.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/neighborhood.jl#LL107-L111">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.unionsize-Tuple{Any, Any, Any}" href="#SimilaritySearch.unionsize-Tuple{Any, Any, Any}"><code>SimilaritySearch.unionsize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unionsize(a, b, isize)</code></pre><p>Computes the size of the union of <code>a</code> and <code>b</code> that have an intersection size <code>isize</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/distances/sets.jl#LL73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SimilaritySearch.Neighborhood" href="#SimilaritySearch.Neighborhood"><code>SimilaritySearch.Neighborhood</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@with_kw mutable struct Neighborhood</code></pre><p>Determines the size of the neighborhood, <span>$k$</span> is adjusted as a callback, and it is intended to affect previously inserted vertices. The neighborhood is designed to consider two components <span>$k=in+out$</span>, i.e. <em>in</em>coming and <em>out</em>going edges for each vertex.</p><ul><li>The <span>$out$</span> size is computed as <span>$minsize + \log(logbase, n)$</span> where <span>$n$</span> is the current number of indexed elements; this is computed searching</li></ul><p>for <span>$out$</span>  elements in the current index.</p><ul><li>The <span>$in$</span> size is unbounded.</li><li>reduce is intended to postprocess neighbors (after search process, i.e., once out edges are computed); do not change <span>$k$</span> but always must return a copy of the reduced result set.</li></ul><p>Note: Set <span>$logbase=Inf$</span> to obtain a fixed number of <span>$in$</span> nodes; and set <span>$minsize=0$</span> to obtain a pure logarithmic growing neighborhood.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sadit/SimilaritySearch.jl/blob/39179aa272553f992945db77ce19ee6b6bf9e7ac/src/graph/graph.jl#LL29-L41">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Wednesday 9 March 2022 18:50">Wednesday 9 March 2022</span>. Using Julia version 1.6.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
